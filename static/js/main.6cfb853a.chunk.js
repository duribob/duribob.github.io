(this["webpackJsonpsky-office-client"]=this["webpackJsonpsky-office-client"]||[]).push([[0],{144:function(e,t,a){},146:function(e,t){function a(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}a.keys=function(){return[]},a.resolve=a,e.exports=a,a.id=146},153:function(e,t,a){"use strict";a.r(t);a(104);var n,r=a(0),i=a.n(r),o=a(41),s=a.n(o),c=a(69),d=a(223),l=(a(144),a(20)),h=a.n(l),u=a(22),m=a(23),y=a(34),p=a(33);!function(e){e[e.IDLE=0]="IDLE",e[e.SITTING=1]="SITTING"}(n||(n={}));var f,b={up:[0,3,-10],down:[0,3,1],left:[0,-8,10],right:[0,-8,10]},v=function(e){Object(y.a)(a,e);var t=Object(p.a)(a);function a(e,r,i,o,s,c){var d;Object(u.a)(this,a),(d=t.call(this,e,r,i,o,c)).playerId=void 0,d.playerTexture=void 0,d.playerBehavior=n.IDLE,d.readyToConnect=!1,d.videoConnected=!1,d.playerName=void 0,d.playerContainer=void 0,d.playerDialogBubble=void 0,d.timeoutID=void 0,d.playerId=s,d.playerTexture=o,d.setDepth(d.y),d.anims.play("".concat(d.playerTexture,"_idle_down"),!0),d.playerContainer=d.scene.add.container(d.x,d.y-30).setDepth(5e3),d.playerDialogBubble=d.scene.add.container(0,0).setDepth(5e3),d.playerContainer.add(d.playerDialogBubble),d.playerName=d.scene.add.text(0,0,"").setFontFamily("Arial").setFontSize(12).setColor("#000000").setOrigin(.5),d.playerContainer.add(d.playerName),d.scene.physics.world.enable(d.playerContainer);var l=[.5,.2];return d.playerContainer.body.setSize(d.width*l[0],d.height*l[1]).setOffset(-8,d.height*(1-l[1])+6),d}return Object(m.a)(a,[{key:"updateDialogBubble",value:function(e){var t=this;this.clearDialogBubble();var a=e.length<=70?e:e.substring(0,70).concat("..."),n=this.scene.add.text(0,0,a,{wordWrap:{width:165,useAdvancedWrap:!0}}).setFontFamily("Arial").setFontSize(12).setColor("#000000").setOrigin(.5),r=n.height,i=n.width;n.setY(-r/2-this.playerName.height/2);var o=i+10,s=r+3,c=n.x-i/2-5,d=n.y-r/2-2;this.playerDialogBubble.add(this.scene.add.graphics().fillStyle(16777215,1).fillRoundedRect(c,d,o,s,3).lineStyle(1,0,1).strokeRoundedRect(c,d,o,s,3)),this.playerDialogBubble.add(n),this.timeoutID=window.setTimeout((function(){t.clearDialogBubble()}),6e3)}},{key:"clearDialogBubble",value:function(){clearTimeout(this.timeoutID),this.playerDialogBubble.removeAll(!0)}}]),a}(h.a.Physics.Arcade.Sprite),g=new h.a.Events.EventEmitter;!function(e){e.PLAYER_JOINED="player-joined",e.PLAYER_UPDATED="player-updated",e.PLAYER_LEFT="player-left",e.PLAYER_DISCONNECTED="player-disconnected",e.MY_PLAYER_READY="my-player-ready",e.MY_PLAYER_NAME_CHANGE="my-player-name-change",e.MY_PLAYER_TEXTURE_CHANGE="my-player-texture-change",e.MY_PLAYER_VIDEO_CONNECTED="my-player-video-connected",e.ITEM_USER_ADDED="item-user-added",e.ITEM_USER_REMOVED="item-user-removed",e.UPDATE_DIALOG_BUBBLE="update-dialog-bubble"}(f||(f={}));var A=a(24),O=a(37);function j(e){var t=e;return t.length>9&&t.endsWith("-ss")&&(t=t.substring(0,t.length-3)),t.replace(/[^0-9a-z]/gi,"G")}var k,E=["#7bf1a8","#ff7e50","#9acd32","#daa520","#ff69b4","#c085f6","#1e90ff","#5f9da0"];function w(e){return E[Math.floor(e.charCodeAt(0)%E.length)]}function x(e){var t=e.split(" ");return t.length<2?t[0][0]:t[0][0]+t[1][0]}!function(e){e[e.DAY=0]="DAY",e[e.NIGHT=1]="NIGHT"}(k||(k={}));var _,C=Object(O.b)({name:"user",initialState:{backgroundMode:function(){var e=(new Date).getHours();return e>6&&e<=18?k.DAY:k.NIGHT}(),sessionId:"",videoConnected:!1,loggedIn:!1,playerNameMap:new Map},reducers:{toggleBackgroundMode:function(e){var t=e.backgroundMode===k.DAY?k.NIGHT:k.DAY;e.backgroundMode=t,Xe.scene.keys.bootstrap.changeBackgroundMode(t)},setSessionId:function(e,t){e.sessionId=t.payload},setVideoConnected:function(e,t){e.videoConnected=t.payload},setLoggedIn:function(e,t){e.loggedIn=t.payload},setPlayerNameMap:function(e,t){e.playerNameMap.set(j(t.payload.id),t.payload.name)},removePlayerNameMap:function(e,t){e.playerNameMap.delete(j(t.payload))}}}),R=C.actions,D=(R.toggleBackgroundMode,R.setSessionId),T=R.setVideoConnected,S=R.setLoggedIn,I=R.setPlayerNameMap,P=R.removePlayerNameMap,N=C.reducer,M=a(75),B=a(76),U=a.n(B),F=function(){function e(t){Object(u.a)(this,e),this.userId=t,this.myPeer=void 0,this.myStream=void 0;var a=this.makeId(t);this.myPeer=new U.a(a),this.myPeer.on("error",(function(e){console.log("ShareScreenWebRTC err.type",e.type),console.error("ShareScreenWebRTC",e)})),this.myPeer.on("call",(function(e){e.answer(),e.on("stream",(function(t){ve.dispatch(H({id:e.peer,call:e,stream:t}))}))}))}return Object(m.a)(e,[{key:"onOpen",value:function(){this.myPeer.disconnected&&this.myPeer.reconnect()}},{key:"onClose",value:function(){this.stopScreenShare(!1),this.myPeer.disconnect()}},{key:"makeId",value:function(e){return"".concat(e.replace(/[^0-9a-z]/gi,"G"),"-ss")}},{key:"startScreenShare",value:function(){var e,t=this;null===(e=navigator.mediaDevices)||void 0===e||e.getDisplayMedia({video:!0,audio:!0}).then((function(e){var a=e.getVideoTracks()[0];a&&(a.onended=function(){t.stopScreenShare()}),t.myStream=e,ve.dispatch(V(e));var n=Xe.scene.keys.game.computerMap.get(ve.getState().computer.computerId);if(n){var r,i=Object(M.a)(n.currentUsers);try{for(i.s();!(r=i.n()).done;){var o=r.value;t.onUserJoined(o)}}catch(s){i.e(s)}finally{i.f()}}}))}},{key:"stopScreenShare",value:function(){var e,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(null===(e=this.myStream)||void 0===e||e.getTracks().forEach((function(e){return e.stop()})),this.myStream=void 0,t){ve.dispatch(V(null));var a=Xe.scene.keys.game;a.network.onStopScreenShare(ve.getState().computer.computerId)}}},{key:"onUserJoined",value:function(e){if(this.myStream&&e!==this.userId){var t=this.makeId(e);this.myPeer.call(t,this.myStream)}}},{key:"onUserLeft",value:function(e){if(e!==this.userId){var t=this.makeId(e);ve.dispatch(J(t))}}}]),e}(),L={computerDialogOpen:!1,computerId:null,myStream:null,peerStreams:new Map,shareScreenManager:null},Y=Object(O.b)({name:"computer",initialState:L,reducers:{openComputerDialog:function(e,t){e.shareScreenManager||(e.shareScreenManager=new F(t.payload.myUserId)),Xe.scene.keys.game.disableKeys(),e.shareScreenManager.onOpen(),e.computerDialogOpen=!0,e.computerId=t.payload.computerId},closeComputerDialog:function(e){var t,a=Xe.scene.keys.game;a.enableKeys(),a.network.disconnectFromComputer(e.computerId);var n,r=Object(M.a)(e.peerStreams.values());try{for(r.s();!(n=r.n()).done;){n.value.call.close()}}catch(i){r.e(i)}finally{r.f()}null===(t=e.shareScreenManager)||void 0===t||t.onClose(),e.computerDialogOpen=!1,e.myStream=null,e.computerId=null,e.peerStreams.clear()},setMyStream:function(e,t){e.myStream=t.payload},addVideoStream:function(e,t){e.peerStreams.set(j(t.payload.id),{call:t.payload.call,stream:t.payload.stream})},removeVideoStream:function(e,t){e.peerStreams.delete(j(t.payload))}}}),G=Y.actions,V=(G.closeComputerDialog,G.openComputerDialog,G.setMyStream),H=G.addVideoStream,J=G.removeVideoStream,W=Y.reducer,K={whiteboardDialogOpen:!1,whiteboardId:null,whiteboardUrl:null,urls:new Map},z=Object(O.b)({name:"whiteboard",initialState:K,reducers:{openWhiteboardDialog:function(e,t){e.whiteboardDialogOpen=!0,e.whiteboardId=t.payload;var a=e.urls.get(t.payload);a&&(e.whiteboardUrl=a),Xe.scene.keys.game.disableKeys()},closeWhiteboardDialog:function(e){var t=Xe.scene.keys.game;t.enableKeys(),t.network.disconnectFromWhiteboard(e.whiteboardId),e.whiteboardDialogOpen=!1,e.whiteboardId=null,e.whiteboardUrl=null},setWhiteboardUrls:function(e,t){e.urls.set(t.payload.whiteboardId,"https://www.tldraw.com/r/sky-office-".concat(t.payload.roomId))}}}),Z=z.actions,Q=(Z.openWhiteboardDialog,Z.closeWhiteboardDialog,Z.setWhiteboardUrls),X=z.reducer;!function(e){e[e.PLAYER_JOINED=0]="PLAYER_JOINED",e[e.PLAYER_LEFT=1]="PLAYER_LEFT",e[e.REGULAR_MESSAGE=2]="REGULAR_MESSAGE"}(_||(_={}));var q,$=Object(O.b)({name:"chat",initialState:{chatMessages:new Array,focused:!1,showChat:!1},reducers:{pushChatMessage:function(e,t){e.chatMessages.push({messageType:_.REGULAR_MESSAGE,chatMessage:t.payload})},pushPlayerJoinedMessage:function(e,t){e.chatMessages.push({messageType:_.PLAYER_JOINED,chatMessage:{createdAt:(new Date).getTime(),author:t.payload,content:"joined the lobby"}})},pushPlayerLeftMessage:function(e,t){e.chatMessages.push({messageType:_.PLAYER_LEFT,chatMessage:{createdAt:(new Date).getTime(),author:t.payload,content:"left the lobby"}})},setFocused:function(e,t){var a=Xe.scene.keys.game;t.payload?a.disableKeys():a.enableKeys(),e.focused=t.payload},setShowChat:function(e,t){e.showChat=t.payload}}}),ee=$.actions,te=ee.pushChatMessage,ae=ee.pushPlayerJoinedMessage,ne=ee.pushPlayerLeftMessage,re=ee.setFocused,ie=ee.setShowChat,oe=$.reducer;!function(e){e.LOBBY="lobby",e.PUBLIC="skyoffice",e.CUSTOM="custom"}(q||(q={}));var se=function(e){return e.name===q.CUSTOM},ce=Object(O.b)({name:"room",initialState:{lobbyJoined:!1,roomJoined:!1,roomId:"",roomName:"",roomDescription:"",availableRooms:new Array},reducers:{setLobbyJoined:function(e,t){e.lobbyJoined=t.payload},setRoomJoined:function(e,t){e.roomJoined=t.payload},setJoinedRoomData:function(e,t){e.roomId=t.payload.id,e.roomName=t.payload.name,e.roomDescription=t.payload.description},setAvailableRooms:function(e,t){e.availableRooms=t.payload.filter((function(e){return se(e)}))},addAvailableRooms:function(e,t){if(se(t.payload.room)){var a=e.availableRooms.findIndex((function(e){return e.roomId===t.payload.roomId}));-1!==a?e.availableRooms[a]=t.payload.room:e.availableRooms.push(t.payload.room)}},removeAvailableRooms:function(e,t){e.availableRooms=e.availableRooms.filter((function(e){return e.roomId!==t.payload}))}}}),de=ce.actions,le=de.setLobbyJoined,he=de.setRoomJoined,ue=de.setJoinedRoomData,me=de.setAvailableRooms,ye=de.addAvailableRooms,pe=de.removeAvailableRooms,fe=ce.reducer;Object(A.d)();var be,ve=Object(O.a)({reducer:{user:N,computer:W,whiteboard:X,chat:oe,room:fe},middleware:function(e){return e({serializableCheck:!1})}});!function(e){e[e.CHAIR=0]="CHAIR",e[e.COMPUTER=1]="COMPUTER",e[e.WHITEBOARD=2]="WHITEBOARD",e[e.VENDINGMACHINE=3]="VENDINGMACHINE"}(be||(be={}));var ge=function(e){Object(y.a)(a,e);var t=Object(p.a)(a);function a(e,n,r,i,o,s){var c;return Object(u.a)(this,a),(c=t.call(this,e,n,r,i,o,s)).playContainerBody=void 0,c.chairOnSit=void 0,c.playContainerBody=c.playerContainer.body,c}return Object(m.a)(a,[{key:"setPlayerName",value:function(e){this.playerName.setText(e),g.emit(f.MY_PLAYER_NAME_CHANGE,e),ve.dispatch(ae(e))}},{key:"setPlayerTexture",value:function(e){this.playerTexture=e,this.anims.play("".concat(this.playerTexture,"_idle_down"),!0),g.emit(f.MY_PLAYER_TEXTURE_CHANGE,this.x,this.y,this.anims.currentAnim.key)}},{key:"update",value:function(e,t,a,r,i){var o,s,c,d,l=this;if(t){var u=e.selectedItem;if(h.a.Input.Keyboard.JustDown(r))switch(null===u||void 0===u?void 0:u.itemType){case be.COMPUTER:u.openDialog(this.playerId,i);break;case be.WHITEBOARD:u.openDialog(i);break;case be.VENDINGMACHINE:window.open("https://www.buymeacoffee.com/skyoffice","_blank")}switch(this.playerBehavior){case n.IDLE:if(h.a.Input.Keyboard.JustDown(a)&&(null===u||void 0===u?void 0:u.itemType)===be.CHAIR){var m=u;return this.scene.time.addEvent({delay:10,callback:function(){l.setVelocity(0,0),m.itemDirection&&(l.setPosition(m.x+b[m.itemDirection][0],m.y+b[m.itemDirection][1]).setDepth(m.depth+b[m.itemDirection][2]),l.playContainerBody.setVelocity(0,0),l.playerContainer.setPosition(m.x+b[m.itemDirection][0],m.y+b[m.itemDirection][1]-30)),l.play("".concat(l.playerTexture,"_sit_").concat(m.itemDirection),!0),e.selectedItem=void 0,"up"===m.itemDirection?e.setPosition(l.x,l.y-l.height):e.setPosition(0,0),i.updatePlayer(l.x,l.y,l.anims.currentAnim.key)},loop:!1}),m.clearDialogBox(),m.setDialogBox("Press E to leave"),this.chairOnSit=m,void(this.playerBehavior=n.SITTING)}var y=200,p=0,f=0;if((null===(o=t.left)||void 0===o?void 0:o.isDown)&&(p-=y),(null===(s=t.right)||void 0===s?void 0:s.isDown)&&(p+=y),(null===(c=t.up)||void 0===c?void 0:c.isDown)&&(f-=y,this.setDepth(this.y)),(null===(d=t.down)||void 0===d?void 0:d.isDown)&&(f+=y,this.setDepth(this.y)),this.setVelocity(p,f),this.body.velocity.setLength(y),this.playContainerBody.setVelocity(p,f),this.playContainerBody.velocity.setLength(y),0===p&&0===f||i.updatePlayer(this.x,this.y,this.anims.currentAnim.key),p>0)this.play("".concat(this.playerTexture,"_run_right"),!0);else if(p<0)this.play("".concat(this.playerTexture,"_run_left"),!0);else if(f>0)this.play("".concat(this.playerTexture,"_run_down"),!0);else if(f<0)this.play("".concat(this.playerTexture,"_run_up"),!0);else{var v=this.anims.currentAnim.key.split("_");v[1]="idle";var g=v.join("_");this.anims.currentAnim.key!==g&&(this.play(v.join("_"),!0),i.updatePlayer(this.x,this.y,this.anims.currentAnim.key))}break;case n.SITTING:if(h.a.Input.Keyboard.JustDown(a)){var A,O=this.anims.currentAnim.key.split("_");O[1]="idle",this.play(O.join("_"),!0),this.playerBehavior=n.IDLE,null===(A=this.chairOnSit)||void 0===A||A.clearDialogBox(),e.setPosition(this.x,this.y),e.update(this,t),i.updatePlayer(this.x,this.y,this.anims.currentAnim.key)}}}}}]),a}(v);h.a.GameObjects.GameObjectFactory.register("myPlayer",(function(e,t,a,n,r){var i=new ge(this.scene,e,t,a,n,r);this.displayList.add(i),this.updateList.add(i),this.scene.physics.world.enableBody(i,h.a.Physics.Arcade.DYNAMIC_BODY);var o=[.5,.2];return i.body.setSize(i.width*o[0],i.height*o[1]).setOffset(i.width*(1-o[0])*.5,i.height*(1-o[1])),i}));var Ae=a(96),Oe=a(50),je=function(e){Object(y.a)(a,e);var t=Object(p.a)(a);function a(e,n,r,i,o,s,c){var d;return Object(u.a)(this,a),(d=t.call(this,e,n,r,i,o,c)).targetPosition=void 0,d.lastUpdateTimestamp=void 0,d.connectionBufferTime=0,d.connected=!1,d.playContainerBody=void 0,d.myPlayer=void 0,d.targetPosition=[n,r],d.playerName.setText(s),d.playContainerBody=d.playerContainer.body,d}return Object(m.a)(a,[{key:"makeCall",value:function(e,t){this.myPlayer=e;var a=e.playerId;!this.connected&&this.connectionBufferTime>=750&&e.readyToConnect&&this.readyToConnect&&e.videoConnected&&a>this.playerId&&(t.connectToNewUser(this.playerId),this.connected=!0,this.connectionBufferTime=0)}},{key:"updateOtherPlayer",value:function(e,t){switch(e){case"name":"string"===typeof t&&this.playerName.setText(t);break;case"x":"number"===typeof t&&(this.targetPosition[0]=t);break;case"y":"number"===typeof t&&(this.targetPosition[1]=t);break;case"anim":"string"===typeof t&&this.anims.play(t,!0);break;case"readyToConnect":"boolean"===typeof t&&(this.readyToConnect=t);break;case"videoConnected":"boolean"===typeof t&&(this.videoConnected=t)}}},{key:"destroy",value:function(e){this.playerContainer.destroy(),Object(Ae.a)(Object(Oe.a)(a.prototype),"destroy",this).call(this,e)}},{key:"preUpdate",value:function(e,t){if(Object(Ae.a)(Object(Oe.a)(a.prototype),"preUpdate",this).call(this,e,t),this.lastUpdateTimestamp&&e-this.lastUpdateTimestamp>750)return this.lastUpdateTimestamp=e,this.x=this.targetPosition[0],this.y=this.targetPosition[1],this.playerContainer.x=this.targetPosition[0],void(this.playerContainer.y=this.targetPosition[1]-30);this.lastUpdateTimestamp=e,this.setDepth(this.y);var n=this.anims.currentAnim.key.split("_");if("sit"===n[1]){var r=n[2];b[r]&&this.setDepth(this.depth+b[r][2])}var i=200,o=.2*t,s=this.targetPosition[0]-this.x,c=this.targetPosition[1]-this.y;Math.abs(s)<o&&(this.x=this.targetPosition[0],this.playerContainer.x=this.targetPosition[0],s=0),Math.abs(c)<o&&(this.y=this.targetPosition[1],this.playerContainer.y=this.targetPosition[1]-30,c=0);var d=0,l=0;if(s>0?d+=i:s<0&&(d-=i),c>0?l+=i:c<0&&(l-=i),this.setVelocity(d,l),this.body.velocity.setLength(i),this.playContainerBody.setVelocity(d,l),this.playContainerBody.velocity.setLength(i),this.connectionBufferTime+=t,this.connected&&!this.body.embedded&&this.body.touching.none&&this.connectionBufferTime>=750){if(this.x<610&&this.y>515&&this.myPlayer.x<610&&this.myPlayer.y>515)return;g.emit(f.PLAYER_DISCONNECTED,this.playerId),this.connectionBufferTime=0,this.connected=!1}}}]),a}(v);h.a.GameObjects.GameObjectFactory.register("otherPlayer",(function(e,t,a,n,r,i){var o=new je(this.scene,e,t,a,n,r,i);this.displayList.add(o),this.updateList.add(o),this.scene.physics.world.enableBody(o,h.a.Physics.Arcade.DYNAMIC_BODY);var s=[6,4];return o.body.setSize(o.width*s[0],o.height*s[1]).setOffset(o.width*(1-s[0])*.5,o.height*(1-s[1])*.5+17),o}));var ke,Ee=a(74),we=function(e){Object(y.a)(a,e);var t=Object(p.a)(a);function a(e,n,r,i,o){var s;return Object(u.a)(this,a),(s=t.call(this,e,n,r,i,o)).selectedItem=void 0,e.physics.add.existing(Object(Ee.a)(s)),s}return Object(m.a)(a,[{key:"update",value:function(e,t){var a,r,i,o;if(t&&e.playerBehavior!==n.SITTING){var s=e.x,c=e.y;(null===(a=t.left)||void 0===a?void 0:a.isDown)?this.setPosition(s-32,c):(null===(r=t.right)||void 0===r?void 0:r.isDown)?this.setPosition(s+32,c):(null===(i=t.up)||void 0===i?void 0:i.isDown)?this.setPosition(s,c-32):(null===(o=t.down)||void 0===o?void 0:o.isDown)&&this.setPosition(s,c+32),this.selectedItem&&(this.scene.physics.overlap(this,this.selectedItem)||(this.selectedItem.clearDialogBox(),this.selectedItem=void 0))}}}]),a}(h.a.GameObjects.Zone),xe=function(e){Object(y.a)(a,e);var t=Object(p.a)(a);function a(){var e;return Object(u.a)(this,a),(e=t.call(this,"game")).network=void 0,e.cursors=void 0,e.keyE=void 0,e.keyR=void 0,e.map=void 0,e.myPlayer=void 0,e.playerSelector=void 0,e.otherPlayers=void 0,e.otherPlayerMap=new Map,e.computerMap=new Map,e.whiteboardMap=new Map,e}return Object(m.a)(a,[{key:"registerKeys",value:function(){this.cursors=this.input.keyboard.createCursorKeys(),this.keyE=this.input.keyboard.addKey("E"),this.keyR=this.input.keyboard.addKey("R"),this.input.keyboard.disableGlobalCapture(),this.input.keyboard.on("keydown-ENTER",(function(e){ve.dispatch(ie(!0)),ve.dispatch(re(!0))})),this.input.keyboard.on("keydown-ESC",(function(e){ve.dispatch(ie(!1))}))}},{key:"disableKeys",value:function(){this.input.keyboard.enabled=!1}},{key:"enableKeys",value:function(){this.input.keyboard.enabled=!0}},{key:"create",value:function(e){if(!e.network)throw new Error("server instance missing");this.network=e.network,function(e){var t=15;e.create({key:"nancy_idle_right",frames:e.generateFrameNames("nancy",{start:0,end:5}),repeat:-1,frameRate:9}),e.create({key:"nancy_idle_up",frames:e.generateFrameNames("nancy",{start:6,end:11}),repeat:-1,frameRate:9}),e.create({key:"nancy_idle_left",frames:e.generateFrameNames("nancy",{start:12,end:17}),repeat:-1,frameRate:9}),e.create({key:"nancy_idle_down",frames:e.generateFrameNames("nancy",{start:18,end:23}),repeat:-1,frameRate:9}),e.create({key:"nancy_run_right",frames:e.generateFrameNames("nancy",{start:24,end:29}),repeat:-1,frameRate:t}),e.create({key:"nancy_run_up",frames:e.generateFrameNames("nancy",{start:30,end:35}),repeat:-1,frameRate:t}),e.create({key:"nancy_run_left",frames:e.generateFrameNames("nancy",{start:36,end:41}),repeat:-1,frameRate:t}),e.create({key:"nancy_run_down",frames:e.generateFrameNames("nancy",{start:42,end:47}),repeat:-1,frameRate:t}),e.create({key:"nancy_sit_down",frames:e.generateFrameNames("nancy",{start:48,end:48}),repeat:0,frameRate:t}),e.create({key:"nancy_sit_left",frames:e.generateFrameNames("nancy",{start:49,end:49}),repeat:0,frameRate:t}),e.create({key:"nancy_sit_right",frames:e.generateFrameNames("nancy",{start:50,end:50}),repeat:0,frameRate:t}),e.create({key:"nancy_sit_up",frames:e.generateFrameNames("nancy",{start:51,end:51}),repeat:0,frameRate:t}),e.create({key:"lucy_idle_right",frames:e.generateFrameNames("lucy",{start:0,end:5}),repeat:-1,frameRate:9}),e.create({key:"lucy_idle_up",frames:e.generateFrameNames("lucy",{start:6,end:11}),repeat:-1,frameRate:9}),e.create({key:"lucy_idle_left",frames:e.generateFrameNames("lucy",{start:12,end:17}),repeat:-1,frameRate:9}),e.create({key:"lucy_idle_down",frames:e.generateFrameNames("lucy",{start:18,end:23}),repeat:-1,frameRate:9}),e.create({key:"lucy_run_right",frames:e.generateFrameNames("lucy",{start:24,end:29}),repeat:-1,frameRate:t}),e.create({key:"lucy_run_up",frames:e.generateFrameNames("lucy",{start:30,end:35}),repeat:-1,frameRate:t}),e.create({key:"lucy_run_left",frames:e.generateFrameNames("lucy",{start:36,end:41}),repeat:-1,frameRate:t}),e.create({key:"lucy_run_down",frames:e.generateFrameNames("lucy",{start:42,end:47}),repeat:-1,frameRate:t}),e.create({key:"lucy_sit_down",frames:e.generateFrameNames("lucy",{start:48,end:48}),repeat:0,frameRate:t}),e.create({key:"lucy_sit_left",frames:e.generateFrameNames("lucy",{start:49,end:49}),repeat:0,frameRate:t}),e.create({key:"lucy_sit_right",frames:e.generateFrameNames("lucy",{start:50,end:50}),repeat:0,frameRate:t}),e.create({key:"lucy_sit_up",frames:e.generateFrameNames("lucy",{start:51,end:51}),repeat:0,frameRate:t}),e.create({key:"ash_idle_right",frames:e.generateFrameNames("ash",{start:0,end:5}),repeat:-1,frameRate:9}),e.create({key:"ash_idle_up",frames:e.generateFrameNames("ash",{start:6,end:11}),repeat:-1,frameRate:9}),e.create({key:"ash_idle_left",frames:e.generateFrameNames("ash",{start:12,end:17}),repeat:-1,frameRate:9}),e.create({key:"ash_idle_down",frames:e.generateFrameNames("ash",{start:18,end:23}),repeat:-1,frameRate:9}),e.create({key:"ash_run_right",frames:e.generateFrameNames("ash",{start:24,end:29}),repeat:-1,frameRate:t}),e.create({key:"ash_run_up",frames:e.generateFrameNames("ash",{start:30,end:35}),repeat:-1,frameRate:t}),e.create({key:"ash_run_left",frames:e.generateFrameNames("ash",{start:36,end:41}),repeat:-1,frameRate:t}),e.create({key:"ash_run_down",frames:e.generateFrameNames("ash",{start:42,end:47}),repeat:-1,frameRate:t}),e.create({key:"ash_sit_down",frames:e.generateFrameNames("ash",{start:48,end:48}),repeat:0,frameRate:t}),e.create({key:"ash_sit_left",frames:e.generateFrameNames("ash",{start:49,end:49}),repeat:0,frameRate:t}),e.create({key:"ash_sit_right",frames:e.generateFrameNames("ash",{start:50,end:50}),repeat:0,frameRate:t}),e.create({key:"ash_sit_up",frames:e.generateFrameNames("ash",{start:51,end:51}),repeat:0,frameRate:t}),e.create({key:"adam_idle_right",frames:e.generateFrameNames("adam",{start:0,end:5}),repeat:-1,frameRate:9}),e.create({key:"adam_idle_up",frames:e.generateFrameNames("adam",{start:6,end:11}),repeat:-1,frameRate:9}),e.create({key:"adam_idle_left",frames:e.generateFrameNames("adam",{start:12,end:17}),repeat:-1,frameRate:9}),e.create({key:"adam_idle_down",frames:e.generateFrameNames("adam",{start:18,end:23}),repeat:-1,frameRate:9}),e.create({key:"adam_run_right",frames:e.generateFrameNames("adam",{start:24,end:29}),repeat:-1,frameRate:t}),e.create({key:"adam_run_up",frames:e.generateFrameNames("adam",{start:30,end:35}),repeat:-1,frameRate:t}),e.create({key:"adam_run_left",frames:e.generateFrameNames("adam",{start:36,end:41}),repeat:-1,frameRate:t}),e.create({key:"adam_run_down",frames:e.generateFrameNames("adam",{start:42,end:47}),repeat:-1,frameRate:t}),e.create({key:"adam_sit_down",frames:e.generateFrameNames("adam",{start:48,end:48}),repeat:0,frameRate:t}),e.create({key:"adam_sit_left",frames:e.generateFrameNames("adam",{start:49,end:49}),repeat:0,frameRate:t}),e.create({key:"adam_sit_right",frames:e.generateFrameNames("adam",{start:50,end:50}),repeat:0,frameRate:t}),e.create({key:"adam_sit_up",frames:e.generateFrameNames("adam",{start:51,end:51}),repeat:0,frameRate:t})}(this.anims),this.map=this.make.tilemap({key:"tilemap"});var t=this.map.addTilesetImage("FloorAndGround","tiles_wall"),a=this.map.createLayer("Ground",t);a.setCollisionByProperty({collides:!0}),this.myPlayer=this.add.myPlayer(705,500,"adam",this.network.mySessionId),this.playerSelector=new we(this,0,0,16,16),this.otherPlayers=this.physics.add.group({classType:je}),this.cameras.main.zoom=1.5,this.cameras.main.startFollow(this.myPlayer,!0),this.physics.add.collider([this.myPlayer,this.myPlayer.playerContainer],a),this.physics.add.overlap(this.playerSelector,[],this.handleItemSelectorOverlap,void 0,this),this.physics.add.overlap(this.myPlayer,this.otherPlayers,this.handlePlayersOverlap,void 0,this),this.network.onPlayerJoined(this.handlePlayerJoined,this),this.network.onPlayerLeft(this.handlePlayerLeft,this),this.network.onMyPlayerReady(this.handleMyPlayerReady,this),this.network.onMyPlayerVideoConnected(this.handleMyVideoConnected,this),this.network.onPlayerUpdated(this.handlePlayerUpdated,this),this.network.onItemUserAdded(this.handleItemUserAdded,this),this.network.onItemUserRemoved(this.handleItemUserRemoved,this),this.network.onChatMessageAdded(this.handleChatMessageAdded,this)}},{key:"handleItemSelectorOverlap",value:function(e,t){var a=e.selectedItem;if(a){if(a===t||a.depth>=t.depth)return;this.myPlayer.playerBehavior!==n.SITTING&&a.clearDialogBox()}e.selectedItem=t,t.onOverlapDialog()}},{key:"addObjectFromTiled",value:function(e,t,a,n){var r=t.x+.5*t.width,i=t.y-.5*t.height;return e.get(r,i,a,t.gid-this.map.getTileset(n).firstgid).setDepth(i)}},{key:"addGroupFromTiled",value:function(e,t,a,n){var r=this,i=this.physics.add.staticGroup();this.map.getObjectLayer(e).objects.forEach((function(e){var n=e.x+.5*e.width,o=e.y-.5*e.height;i.get(n,o,t,e.gid-r.map.getTileset(a).firstgid).setDepth(o)})),this.myPlayer&&n&&this.physics.add.collider([this.myPlayer,this.myPlayer.playerContainer],i)}},{key:"handlePlayerJoined",value:function(e,t){var a=this.add.otherPlayer(e.x,e.y,"adam",t,e.name);this.otherPlayers.add(a),this.otherPlayerMap.set(t,a)}},{key:"handlePlayerLeft",value:function(e){if(this.otherPlayerMap.has(e)){var t=this.otherPlayerMap.get(e);if(!t)return;this.otherPlayers.remove(t,!0,!0),this.otherPlayerMap.delete(e)}}},{key:"handleMyPlayerReady",value:function(){this.myPlayer.readyToConnect=!0}},{key:"handleMyVideoConnected",value:function(){this.myPlayer.videoConnected=!0}},{key:"handlePlayerUpdated",value:function(e,t,a){var n=this.otherPlayerMap.get(a);null===n||void 0===n||n.updateOtherPlayer(e,t)}},{key:"handlePlayersOverlap",value:function(e,t){var a;t.makeCall(e,null===(a=this.network)||void 0===a?void 0:a.webRTC)}},{key:"handleItemUserAdded",value:function(e,t,a){if(a===be.COMPUTER){var n=this.computerMap.get(t);null===n||void 0===n||n.addCurrentUser(e)}else if(a===be.WHITEBOARD){var r=this.whiteboardMap.get(t);null===r||void 0===r||r.addCurrentUser(e)}}},{key:"handleItemUserRemoved",value:function(e,t,a){if(a===be.COMPUTER){var n=this.computerMap.get(t);null===n||void 0===n||n.removeCurrentUser(e)}else if(a===be.WHITEBOARD){var r=this.whiteboardMap.get(t);null===r||void 0===r||r.removeCurrentUser(e)}}},{key:"handleChatMessageAdded",value:function(e,t){var a=this.otherPlayerMap.get(e);null===a||void 0===a||a.updateDialogBubble(t)}},{key:"update",value:function(e,t){this.myPlayer&&this.network&&(this.playerSelector.update(this.myPlayer,this.cursors),this.myPlayer.update(this.playerSelector,this.cursors,this.keyE,this.keyR,this.network))}}]),a}(h.a.Scene),_e=function(e){Object(y.a)(a,e);var t=Object(p.a)(a);function a(){var e;return Object(u.a)(this,a),(e=t.call(this,"background")).cloud=void 0,e.cloudKey=void 0,e.backdropKey=void 0,e}return Object(m.a)(a,[{key:"create",value:function(e){var t=this.cameras.main.height,a=this.cameras.main.width;e.backgroundMode===k.DAY?(this.backdropKey="backdrop_day",this.cloudKey="cloud_day",this.cameras.main.setBackgroundColor("#c6eefc")):(this.backdropKey="backdrop_night",this.cloudKey="cloud_night",this.cameras.main.setBackgroundColor("#2c4464"));var n=this.add.image(a/2,t/2,this.backdropKey),r=Math.max(a/n.width,t/n.height);n.setScale(r).setScrollFactor(0);var i=this.add.image(a/2,t/2,"sun_moon"),o=Math.max(a/i.width,t/i.height);i.setScale(o).setScrollFactor(0);var s=this.textures.get(this.cloudKey).getFrameNames();this.cloud=this.physics.add.group();for(var c=0;c<24;c++){var d=h.a.Math.RND.between(.5*-a,1.5*a),l=h.a.Math.RND.between(.2*t,.8*t),u=h.a.Math.RND.between(15,30);this.cloud.get(d,l,this.cloudKey,s[c%6]).setScale(3).setVelocity(u,0)}}},{key:"update",value:function(e,t){this.physics.world.wrap(this.cloud,500)}}]),a}(h.a.Scene),Ce=a(45),Re=a.n(Ce),De=a(11),Te=a(70),Se=a(106);!function(e){e[e.UPDATE_PLAYER=0]="UPDATE_PLAYER",e[e.UPDATE_PLAYER_NAME=1]="UPDATE_PLAYER_NAME",e[e.READY_TO_CONNECT=2]="READY_TO_CONNECT",e[e.DISCONNECT_STREAM=3]="DISCONNECT_STREAM",e[e.CONNECT_TO_COMPUTER=4]="CONNECT_TO_COMPUTER",e[e.DISCONNECT_FROM_COMPUTER=5]="DISCONNECT_FROM_COMPUTER",e[e.STOP_SCREEN_SHARE=6]="STOP_SCREEN_SHARE",e[e.CONNECT_TO_WHITEBOARD=7]="CONNECT_TO_WHITEBOARD",e[e.DISCONNECT_FROM_WHITEBOARD=8]="DISCONNECT_FROM_WHITEBOARD",e[e.VIDEO_CONNECTED=9]="VIDEO_CONNECTED",e[e.ADD_CHAT_MESSAGE=10]="ADD_CHAT_MESSAGE",e[e.SEND_ROOM_DATA=11]="SEND_ROOM_DATA"}(ke||(ke={}));var Ie=function(){function e(t,a){Object(u.a)(this,e),this.myPeer=void 0,this.peers=new Map,this.onCalledPeers=new Map,this.videoGrid=document.querySelector(".video-grid"),this.buttonGrid=document.querySelector(".button-grid"),this.myVideo=document.createElement("video"),this.myStream=void 0,this.network=void 0;var n=this.replaceInvalidId(t);this.myPeer=new U.a(n),this.network=a,console.log("userId:",t),console.log("sanitizedId:",n),this.myPeer.on("error",(function(e){console.log(e.type),console.error(e)})),this.myVideo.muted=!0,this.initialize()}return Object(m.a)(e,[{key:"replaceInvalidId",value:function(e){return e.replace(/[^0-9a-z]/gi,"G")}},{key:"initialize",value:function(){var e=this;this.myPeer.on("call",(function(t){if(!e.onCalledPeers.has(t.peer)){t.answer(e.myStream);var a=document.createElement("video");e.onCalledPeers.set(t.peer,{call:t,video:a}),t.on("stream",(function(t){e.addVideoStream(a,t)}))}}))}},{key:"checkPreviousPermission",value:function(){var e,t=this;null===(e=navigator.permissions)||void 0===e||e.query({name:"microphone"}).then((function(e){"granted"===e.state&&t.getUserMedia(!1)}))}},{key:"getUserMedia",value:function(){var e,t=this,a=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];null===(e=navigator.mediaDevices)||void 0===e||e.getUserMedia({video:!0,audio:!0}).then((function(e){t.myStream=e,t.addVideoStream(t.myVideo,t.myStream),t.setUpButtons(),ve.dispatch(T(!0)),t.network.videoConnected()})).catch((function(e){a&&window.alert("No webcam or microphone found, or permission is blocked")}))}},{key:"connectToNewUser",value:function(e){var t=this;if(this.myStream){var a=this.replaceInvalidId(e);if(!this.peers.has(a)){console.log("calling",a);var n=this.myPeer.call(a,this.myStream),r=document.createElement("video");this.peers.set(a,{call:n,video:r}),n.on("stream",(function(e){t.addVideoStream(r,e)}))}}}},{key:"addVideoStream",value:function(e,t){e.srcObject=t,e.addEventListener("loadedmetadata",(function(){e.play()})),this.videoGrid&&this.videoGrid.append(e)}},{key:"deleteVideoStream",value:function(e){var t=this.replaceInvalidId(e);if(this.peers.has(t)){var a=this.peers.get(t);null===a||void 0===a||a.call.close(),null===a||void 0===a||a.video.remove(),this.peers.delete(t)}}},{key:"deleteOnCalledVideoStream",value:function(e){var t=this.replaceInvalidId(e);if(this.onCalledPeers.has(t)){var a=this.onCalledPeers.get(t);null===a||void 0===a||a.call.close(),null===a||void 0===a||a.video.remove(),this.onCalledPeers.delete(t)}}},{key:"setUpButtons",value:function(){var e,t,a=this,n=document.createElement("button");n.innerText="Mute",n.addEventListener("click",(function(){if(a.myStream){var e=a.myStream.getAudioTracks()[0];e.enabled?(e.enabled=!1,n.innerText="Unmute"):(e.enabled=!0,n.innerText="Mute")}}));var r=document.createElement("button");r.innerText="Video off",r.addEventListener("click",(function(){if(a.myStream){var e=a.myStream.getVideoTracks()[0];e.enabled?(e.enabled=!1,r.innerText="Video on"):(e.enabled=!0,r.innerText="Video off")}})),null===(e=this.buttonGrid)||void 0===e||e.append(n),null===(t=this.buttonGrid)||void 0===t||t.append(r)}}]),e}(),Pe=function(){function e(){Object(u.a)(this,e),this.client=void 0,this.room=void 0,this.lobby=void 0,this.webRTC=void 0,this.mySessionId=void 0;window.location.protocol.replace("http","ws");this.client=new Se.Client("wss://castle-cafe-test.herokuapp.com"),this.joinLobbyRoom().then((function(){ve.dispatch(le(!0))})),g.on(f.MY_PLAYER_NAME_CHANGE,this.updatePlayerName,this),g.on(f.MY_PLAYER_TEXTURE_CHANGE,this.updatePlayer,this),g.on(f.PLAYER_DISCONNECTED,this.playerStreamDisconnect,this)}return Object(m.a)(e,[{key:"joinLobbyRoom",value:function(){var e=Object(Te.a)(Re.a.mark((function e(){return Re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.client.joinOrCreate(q.LOBBY);case 2:this.lobby=e.sent,this.lobby.onMessage("rooms",(function(e){ve.dispatch(me(e))})),this.lobby.onMessage("+",(function(e){var t=Object(De.a)(e,2),a=t[0],n=t[1];ve.dispatch(ye({roomId:a,room:n}))})),this.lobby.onMessage("-",(function(e){ve.dispatch(pe(e))}));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"joinOrCreatePublic",value:function(){var e=Object(Te.a)(Re.a.mark((function e(){return Re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.client.joinOrCreate(q.PUBLIC);case 2:this.room=e.sent,this.initialize();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"joinCustomById",value:function(){var e=Object(Te.a)(Re.a.mark((function e(t,a){return Re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.client.joinById(t,{password:a});case 2:this.room=e.sent,this.initialize();case 4:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"createCustom",value:function(){var e=Object(Te.a)(Re.a.mark((function e(t){var a,n,r,i;return Re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.name,n=t.description,r=t.password,i=t.autoDispose,e.next=3,this.client.create(q.CUSTOM,{name:a,description:n,password:r,autoDispose:i});case 3:this.room=e.sent,this.initialize();case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"initialize",value:function(){var e=this;this.room&&(this.lobby.leave(),this.mySessionId=this.room.sessionId,ve.dispatch(D(this.room.sessionId)),this.webRTC=new Ie(this.mySessionId,this),this.room.state.players.onAdd=function(t,a){a!==e.mySessionId&&(t.onChange=function(e){e.forEach((function(e){var n=e.field,r=e.value;g.emit(f.PLAYER_UPDATED,n,r,a),"name"===n&&""!==r&&(g.emit(f.PLAYER_JOINED,t,a),ve.dispatch(I({id:a,name:r})),ve.dispatch(ae(r)))}))})},this.room.state.players.onRemove=function(t,a){var n,r;g.emit(f.PLAYER_LEFT,a),null===(n=e.webRTC)||void 0===n||n.deleteVideoStream(a),null===(r=e.webRTC)||void 0===r||r.deleteOnCalledVideoStream(a),ve.dispatch(ne(t.name)),ve.dispatch(P(a))},this.room.state.computers.onAdd=function(e,t){e.connectedUser.onAdd=function(e,a){g.emit(f.ITEM_USER_ADDED,e,t,be.COMPUTER)},e.connectedUser.onRemove=function(e,a){g.emit(f.ITEM_USER_REMOVED,e,t,be.COMPUTER)}},this.room.state.whiteboards.onAdd=function(e,t){ve.dispatch(Q({whiteboardId:t,roomId:e.roomId})),e.connectedUser.onAdd=function(e,a){g.emit(f.ITEM_USER_ADDED,e,t,be.WHITEBOARD)},e.connectedUser.onRemove=function(e,a){g.emit(f.ITEM_USER_REMOVED,e,t,be.WHITEBOARD)}},this.room.state.chatMessages.onAdd=function(e,t){ve.dispatch(te(e))},this.room.onMessage(ke.SEND_ROOM_DATA,(function(e){ve.dispatch(ue(e))})),this.room.onMessage(ke.ADD_CHAT_MESSAGE,(function(e){var t=e.clientId,a=e.content;g.emit(f.UPDATE_DIALOG_BUBBLE,t,a)})),this.room.onMessage(ke.DISCONNECT_STREAM,(function(t){var a;null===(a=e.webRTC)||void 0===a||a.deleteOnCalledVideoStream(t)})),this.room.onMessage(ke.STOP_SCREEN_SHARE,(function(e){var t;null===(t=ve.getState().computer.shareScreenManager)||void 0===t||t.onUserLeft(e)})))}},{key:"onChatMessageAdded",value:function(e,t){g.on(f.UPDATE_DIALOG_BUBBLE,e,t)}},{key:"onItemUserAdded",value:function(e,t){g.on(f.ITEM_USER_ADDED,e,t)}},{key:"onItemUserRemoved",value:function(e,t){g.on(f.ITEM_USER_REMOVED,e,t)}},{key:"onPlayerJoined",value:function(e,t){g.on(f.PLAYER_JOINED,e,t)}},{key:"onPlayerLeft",value:function(e,t){g.on(f.PLAYER_LEFT,e,t)}},{key:"onMyPlayerReady",value:function(e,t){g.on(f.MY_PLAYER_READY,e,t)}},{key:"onMyPlayerVideoConnected",value:function(e,t){g.on(f.MY_PLAYER_VIDEO_CONNECTED,e,t)}},{key:"onPlayerUpdated",value:function(e,t){g.on(f.PLAYER_UPDATED,e,t)}},{key:"updatePlayer",value:function(e,t,a){var n;null===(n=this.room)||void 0===n||n.send(ke.UPDATE_PLAYER,{x:e,y:t,anim:a})}},{key:"updatePlayerName",value:function(e){var t;null===(t=this.room)||void 0===t||t.send(ke.UPDATE_PLAYER_NAME,{name:e})}},{key:"readyToConnect",value:function(){var e;null===(e=this.room)||void 0===e||e.send(ke.READY_TO_CONNECT),g.emit(f.MY_PLAYER_READY)}},{key:"videoConnected",value:function(){var e;null===(e=this.room)||void 0===e||e.send(ke.VIDEO_CONNECTED),g.emit(f.MY_PLAYER_VIDEO_CONNECTED)}},{key:"playerStreamDisconnect",value:function(e){var t,a;null===(t=this.room)||void 0===t||t.send(ke.DISCONNECT_STREAM,{clientId:e}),null===(a=this.webRTC)||void 0===a||a.deleteVideoStream(e)}},{key:"connectToComputer",value:function(e){var t;null===(t=this.room)||void 0===t||t.send(ke.CONNECT_TO_COMPUTER,{computerId:e})}},{key:"disconnectFromComputer",value:function(e){var t;null===(t=this.room)||void 0===t||t.send(ke.DISCONNECT_FROM_COMPUTER,{computerId:e})}},{key:"connectToWhiteboard",value:function(e){var t;null===(t=this.room)||void 0===t||t.send(ke.CONNECT_TO_WHITEBOARD,{whiteboardId:e})}},{key:"disconnectFromWhiteboard",value:function(e){var t;null===(t=this.room)||void 0===t||t.send(ke.DISCONNECT_FROM_WHITEBOARD,{whiteboardId:e})}},{key:"onStopScreenShare",value:function(e){var t;null===(t=this.room)||void 0===t||t.send(ke.STOP_SCREEN_SHARE,{computerId:e})}},{key:"addChatMessage",value:function(e){var t;null===(t=this.room)||void 0===t||t.send(ke.ADD_CHAT_MESSAGE,{content:e})}}]),e}(),Ne=function(e){Object(y.a)(a,e);var t=Object(p.a)(a);function a(){var e;return Object(u.a)(this,a),(e=t.call(this,"bootstrap")).network=void 0,e}return Object(m.a)(a,[{key:"preload",value:function(){this.load.atlas("cloud_day","assets/background/cloud_day.png","assets/background/cloud_day.json"),this.load.image("backdrop_day","assets/background/backdrop_day.png"),this.load.atlas("cloud_night","assets/background/cloud_night.png","assets/background/cloud_night.json"),this.load.image("backdrop_night","assets/background/backdrop_night.png"),this.load.image("sun_moon","assets/background/sun_moon.png"),this.load.tilemapTiledJSON("tilemap","assets/map/map.json"),this.load.spritesheet("tiles_wall","assets/map/FloorAndGround.png",{frameWidth:32,frameHeight:32}),this.load.spritesheet("chairs","assets/items/chair.png",{frameWidth:32,frameHeight:64}),this.load.spritesheet("computers","assets/items/computer.png",{frameWidth:96,frameHeight:64}),this.load.spritesheet("whiteboards","assets/items/whiteboard.png",{frameWidth:64,frameHeight:64}),this.load.spritesheet("vendingmachines","assets/items/vendingmachine.png",{frameWidth:48,frameHeight:72}),this.load.spritesheet("office","assets/items/Modern_Office_Black_Shadow.png",{frameWidth:32,frameHeight:32}),this.load.spritesheet("basement","assets/items/Basement.png",{frameWidth:32,frameHeight:32}),this.load.spritesheet("generic","assets/items/Generic.png",{frameWidth:32,frameHeight:32}),this.load.spritesheet("adam","assets/character/adam.png",{frameWidth:32,frameHeight:48}),this.load.spritesheet("ash","assets/character/ash.png",{frameWidth:32,frameHeight:48}),this.load.spritesheet("lucy","assets/character/lucy.png",{frameWidth:32,frameHeight:48}),this.load.spritesheet("nancy","assets/character/nancy.png",{frameWidth:32,frameHeight:48})}},{key:"init",value:function(){this.network=new Pe}},{key:"create",value:function(){this.launchBackground(ve.getState().user.backgroundMode)}},{key:"launchBackground",value:function(e){}},{key:"launchGame",value:function(){var e;null===(e=this.network.webRTC)||void 0===e||e.checkPreviousPermission(),this.scene.launch("game",{network:this.network}),ve.dispatch(he(!0))}},{key:"changeBackgroundMode",value:function(e){this.scene.stop("background"),this.launchBackground(e)}}]),a}(h.a.Scene),Me={type:h.a.AUTO,parent:"phaser-container",backgroundColor:"#93cbee",pixelArt:!0,scale:{mode:h.a.Scale.ScaleModes.RESIZE,width:window.innerWidth,height:window.innerHeight},physics:{default:"arcade",arcade:{gravity:{y:0},debug:!1}},autoFocus:!0,scene:[Ne,_e,xe]},Be=new h.a.Game(Me);window.game=Be;var Ue,Fe,Le,Ye,Ge,Ve,He,Je,We,Ke,ze,Ze,Qe,Xe=Be,qe=a(116),$e=Object(qe.a)({palette:{mode:"dark",primary:{main:"#426dea"},secondary:{main:"#42eacb"}}}),et=a(16),tt=a(19),at=c.c,nt=a(226),rt=a(227),it=a(214),ot=a(228),st=a(218),ct=a(219),dt=a(114),lt=a.n(dt),ht=a(94),ut=a.n(ht),mt=a(231),yt=a(229),pt=a(232),ft=a(230),bt=a(234),vt=a(233),gt=a(235),At=a(215),Ot=a(224),jt=a(237),kt=a(236),Et=a(222),wt=a(110),xt=a.n(wt),_t=a(111),Ct=a.n(_t),Rt=a(1),Dt=tt.a.p(Ue||(Ue=Object(et.a)(["\n  margin: 10px;\n  font-size: 18px;\n  color: #eee;\n  text-align: center;\n"]))),Tt=Object(tt.a)(yt.a)(Fe||(Fe=Object(et.a)(["\n  max-height: 500px;\n\n  table {\n    min-width: 650px;\n  }\n"]))),St=Object(tt.a)(ft.a)(Le||(Le=Object(et.a)(["\n  &:last-child td,\n  &:last-child th {\n    border: 0;\n  }\n\n  .avatar {\n    height: 30px;\n    width: 30px;\n    font-size: 15px;\n  }\n\n  .name {\n    min-width: 100px;\n    overflow-wrap: anywhere;\n  }\n\n  .description {\n    min-width: 200px;\n    overflow-wrap: anywhere;\n  }\n\n  .join-wrapper {\n    display: flex;\n    gap: 3px;\n    align-items: center;\n  }\n\n  .lock-icon {\n    font-size: 18px;\n  }\n"]))),It=Object(tt.a)(Ot.a)(Ye||(Ye=Object(et.a)(["\n  .dialog-content {\n    display: flex;\n    flex-direction: column;\n    gap: 10px;\n  }\n\n  .MuiDialog-paper {\n    background: #222639;\n  }\n"]))),Pt=function(){var e=Object(r.useState)(""),t=Object(De.a)(e,2),a=t[0],n=t[1],i=Object(r.useState)(""),o=Object(De.a)(i,2),s=o[0],c=o[1],d=Object(r.useState)(!1),l=Object(De.a)(d,2),h=l[0],u=l[1],m=Object(r.useState)(!1),y=Object(De.a)(m,2),p=y[0],f=y[1],b=Object(r.useState)(!1),v=Object(De.a)(b,2),g=v[0],A=v[1],O=at((function(e){return e.room.lobbyJoined})),j=at((function(e){return e.room.availableRooms})),k=function(e,t){if(O){var a=Xe.scene.keys.bootstrap;a.network.joinCustomById(e,t).then((function(){return a.launchGame()})).catch((function(e){console.error(e),t&&f(!0)}))}},E=function(){u(!1),n(""),A(!1),f(!1)};return 0===j.length?Object(Rt.jsx)(Dt,{children:"There are no custom rooms now, create one or join the public lobby."}):Object(Rt.jsxs)(Rt.Fragment,{children:[Object(Rt.jsx)(Tt,{component:mt.a,children:Object(Rt.jsxs)(pt.a,{children:[Object(Rt.jsx)(vt.a,{children:Object(Rt.jsxs)(ft.a,{children:[Object(Rt.jsx)(bt.a,{}),Object(Rt.jsx)(bt.a,{children:"Name"}),Object(Rt.jsx)(bt.a,{children:"Description"}),Object(Rt.jsx)(bt.a,{children:"ID"}),Object(Rt.jsx)(bt.a,{align:"center",children:Object(Rt.jsx)(xt.a,{})}),Object(Rt.jsx)(bt.a,{align:"right"})]})}),Object(Rt.jsx)(gt.a,{children:j.map((function(e){var t=e.roomId,a=e.metadata,n=e.clients,r=a.name,i=a.description,o=a.hasPassword;return Object(Rt.jsxs)(St,{children:[Object(Rt.jsx)(bt.a,{children:Object(Rt.jsx)(Et.a,{className:"avatar",style:{background:w(r)},children:x(r)})}),Object(Rt.jsx)(bt.a,{children:Object(Rt.jsx)("div",{className:"name",children:r})}),Object(Rt.jsx)(bt.a,{children:Object(Rt.jsx)("div",{className:"description",children:i})}),Object(Rt.jsx)(bt.a,{children:t}),Object(Rt.jsx)(bt.a,{align:"center",children:n}),Object(Rt.jsx)(bt.a,{align:"center",children:Object(Rt.jsx)(it.a,{title:o?"Password required":"",children:Object(Rt.jsx)(nt.a,{variant:"outlined",color:"secondary",onClick:function(){o?(u(!0),c(t)):k(t,null)},children:Object(Rt.jsxs)("div",{className:"join-wrapper",children:[o&&Object(Rt.jsx)(Ct.a,{className:"lock-icon"}),"Join"]})})})})]},t)}))})]})}),Object(Rt.jsx)(It,{open:h,onClose:E,children:Object(Rt.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=""!==a;t===g&&A(!g),t&&k(s,a)},children:[Object(Rt.jsxs)(kt.a,{className:"dialog-content",children:[Object(Rt.jsx)(Dt,{children:"This a private room, please enter password:"}),Object(Rt.jsx)(At.a,{autoFocus:!0,fullWidth:!0,error:g,helperText:g&&"Required",value:a,label:"Password",type:"password",variant:"outlined",color:"secondary",onInput:function(e){n(e.target.value)}}),p&&Object(Rt.jsx)(st.a,{severity:"error",variant:"outlined",children:"Incorrect Password!"})]}),Object(Rt.jsxs)(jt.a,{children:[Object(Rt.jsx)(nt.a,{color:"secondary",onClick:E,children:"Cancel"}),Object(Rt.jsx)(nt.a,{color:"secondary",type:"submit",children:"Join"})]})]})})]})},Nt=a(5),Mt=a(93),Bt=a(220),Ut=a(113),Ft=a.n(Ut),Lt=a(112),Yt=a.n(Lt),Gt=tt.a.form(Ge||(Ge=Object(et.a)(["\n  display: flex;\n  flex-direction: column;\n  width: 320px;\n  gap: 20px;\n"]))),Vt=function(){var e=Object(r.useState)({name:"",description:"",password:null,autoDispose:!0}),t=Object(De.a)(e,2),a=t[0],n=t[1],i=Object(r.useState)(!1),o=Object(De.a)(i,2),s=o[0],c=o[1],d=Object(r.useState)(!1),l=Object(De.a)(d,2),h=l[0],u=l[1],m=Object(r.useState)(!1),y=Object(De.a)(m,2),p=y[0],f=y[1],b=at((function(e){return e.room.lobbyJoined})),v=function(e){return function(t){n(Object(Mt.a)(Object(Mt.a)({},a),{},Object(Nt.a)({},e,t.target.value)))}};return Object(Rt.jsxs)(Gt,{onSubmit:function(e){e.preventDefault();var t=""!==a.name,n=""!==a.description;if(t===h&&u(!h),n===p&&f(!p),t&&n&&b){var r=Xe.scene.keys.bootstrap;r.network.createCustom(a).then((function(){return r.launchGame()})).catch((function(e){return console.error(e)}))}},children:[Object(Rt.jsx)(At.a,{label:"Name",variant:"outlined",color:"secondary",autoFocus:!0,error:h,helperText:h&&"Name is required",onChange:v("name")}),Object(Rt.jsx)(At.a,{label:"Description",variant:"outlined",color:"secondary",error:p,helperText:p&&"Description is required",multiline:!0,rows:4,onChange:v("description")}),Object(Rt.jsx)(At.a,{type:s?"text":"password",label:"Password (optional)",onChange:v("password"),color:"secondary",InputProps:{endAdornment:Object(Rt.jsx)(Bt.a,{position:"end",children:Object(Rt.jsx)(rt.a,{"aria-label":"toggle password visibility",onClick:function(){return c(!s)},edge:"end",children:s?Object(Rt.jsx)(Yt.a,{}):Object(Rt.jsx)(Ft.a,{})})})}}),Object(Rt.jsx)(nt.a,{variant:"contained",color:"secondary",type:"submit",children:"Create"})]})},Ht=tt.a.div(Ve||(Ve=Object(et.a)(["\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  display: flex;\n  flex-direction: column;\n  gap: 60px;\n  align-items: center;\n"]))),Jt=tt.a.div(He||(He=Object(et.a)(["\n  background: #222639;\n  border-radius: 16px;\n  padding: 36px 60px;\n  box-shadow: 0px 0px 5px #0000006f;\n"]))),Wt=tt.a.div(Je||(Je=Object(et.a)(["\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n  align-items: center;\n  justify-content: center;\n\n  .tip {\n    font-size: 18px;\n  }\n"]))),Kt=tt.a.div(We||(We=Object(et.a)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n"]))),zt=tt.a.h1(Ke||(Ke=Object(et.a)(["\n  font-size: 24px;\n  color: #eee;\n  text-align: center;\n"]))),Zt=tt.a.div(ze||(ze=Object(et.a)(["\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n  margin: 20px 0;\n  align-items: center;\n  justify-content: center;\n\n  img {\n    border-radius: 8px;\n    height: 120px;\n  }\n"]))),Qt=tt.a.div(Ze||(Ze=Object(et.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n\n  h3 {\n    color: #33ac96;\n  }\n"]))),Xt=Object(tt.a)(ot.a)(Qe||(Qe=Object(et.a)(["\n  width: 360px;\n"])));function qt(){var e=Object(r.useState)(!1),t=Object(De.a)(e,2),a=t[0],n=t[1],i=Object(r.useState)(!1),o=Object(De.a)(i,2),s=o[0],c=o[1],d=Object(r.useState)(!1),l=Object(De.a)(d,2),h=l[0],u=l[1],m=at((function(e){return e.room.lobbyJoined}));return Object(Rt.jsxs)(Rt.Fragment,{children:[Object(Rt.jsx)(ct.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:h,autoHideDuration:3e3,onClose:function(){u(!1)},children:Object(Rt.jsx)(st.a,{severity:"error",variant:"outlined",style:{background:"#fdeded",color:"#7d4747"},children:"Trying to connect to server, please try again!"})}),Object(Rt.jsxs)(Ht,{children:[Object(Rt.jsx)(Jt,{children:s?Object(Rt.jsxs)(Wt,{children:[Object(Rt.jsx)(zt,{children:"Create Custom Room"}),Object(Rt.jsx)(Kt,{children:Object(Rt.jsx)(rt.a,{onClick:function(){return c(!1)},children:Object(Rt.jsx)(ut.a,{})})}),Object(Rt.jsx)(Vt,{})]}):a?Object(Rt.jsxs)(Wt,{children:[Object(Rt.jsxs)(zt,{children:["Custom Rooms",Object(Rt.jsx)(it.a,{title:"We update the results in realtime, no refresh needed!",placement:"top",children:Object(Rt.jsx)(rt.a,{children:Object(Rt.jsx)(lt.a,{className:"tip"})})})]}),Object(Rt.jsx)(Kt,{children:Object(Rt.jsx)(rt.a,{onClick:function(){return n(!1)},children:Object(Rt.jsx)(ut.a,{})})}),Object(Rt.jsx)(Pt,{}),Object(Rt.jsx)(nt.a,{variant:"contained",color:"secondary",onClick:function(){return c(!0)},children:"Create new room"})]}):Object(Rt.jsxs)(Rt.Fragment,{children:[Object(Rt.jsx)(zt,{children:"Castle Cafe Test"}),Object(Rt.jsx)(Zt,{children:Object(Rt.jsx)(nt.a,{variant:"contained",color:"secondary",onClick:function(){if(m){var e=Xe.scene.keys.bootstrap;e.network.joinOrCreatePublic().then((function(){return e.launchGame()})).catch((function(e){return console.error(e)}))}else u(!0)},children:"Connect to server"})})]})}),!m&&Object(Rt.jsxs)(Qt,{children:[Object(Rt.jsx)("h3",{children:" Connecting to server..."}),Object(Rt.jsx)(Xt,{color:"secondary"})]})]})]})}var $t,ea,ta,aa,na,ra,ia,oa,sa,ca,da=a(115),la=a.n(da),ha=a(216),ua=a(212),ma=a(213),ya=a(211);a(151),a(152);ma.a.use([ya.a]);for(var pa,fa=tt.a.form($t||($t=Object(et.a)(["\n  position: fixed;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  background: #222639;\n  border-radius: 16px;\n  padding: 36px 60px;\n  box-shadow: 0px 0px 5px #0000006f;\n"]))),ba=tt.a.p(ea||(ea=Object(et.a)(["\n  margin: 5px;\n  font-size: 20px;\n  color: #c2c2c2;\n  text-align: center;\n"]))),va=tt.a.div(ta||(ta=Object(et.a)(["\n  max-width: 500px;\n  max-height: 120px;\n  overflow-wrap: anywhere;\n  overflow-y: auto;\n  display: flex;\n  gap: 10px;\n  justify-content: center;\n\n  h3 {\n    font-size: 24px;\n    color: #eee;\n  }\n"]))),ga=tt.a.div(aa||(aa=Object(et.a)(["\n  max-width: 500px;\n  max-height: 150px;\n  overflow-wrap: anywhere;\n  overflow-y: auto;\n  font-size: 16px;\n  color: #c2c2c2;\n  display: flex;\n  justify-content: center;\n"]))),Aa=tt.a.h3(na||(na=Object(et.a)(["\n  width: 160px;\n  font-size: 16px;\n  color: #eee;\n  text-align: center;\n"]))),Oa=tt.a.div(ra||(ra=Object(et.a)(["\n  display: flex;\n  margin: 36px 0;\n"]))),ja=tt.a.div(ia||(ia=Object(et.a)(["\n  margin-right: 48px;\n\n  --swiper-navigation-size: 24px;\n\n  .swiper-container {\n    width: 160px;\n    height: 220px;\n    border-radius: 8px;\n    overflow: hidden;\n  }\n\n  .swiper-slide {\n    width: 160px;\n    height: 220px;\n    background: #dbdbe0;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  }\n\n  .swiper-slide img {\n    display: block;\n    width: 95px;\n    height: 136px;\n    object-fit: contain;\n  }\n"]))),ka=tt.a.div(oa||(oa=Object(et.a)(["\n  width: 300px;\n"]))),Ea=tt.a.div(sa||(sa=Object(et.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]))),wa=tt.a.div(ca||(ca=Object(et.a)(["\n  margin-top: 30px;\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  gap: 3px;\n"]))),xa=[{name:"adam",img:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAABICAMAAACHrYYZAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAclBMVEUAAABWWXJrb2lIS1RAQFc6OlBcYWdcX1dGRl5gY1xISVNISVhFRlBCQll0Z3JRSWZUTGpuXGR0YmuDbG88PFJHR19RRmRWWXJGRl46OlCVnVhoclNfaUpdYEO7o4b/y7D2rp/2l4SAXo6fdKj/uJP///9thjlLAAAAF3RSTlMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAL2TUGAAAAABYktHRCXDAckPAAAAB3RJTUUH5QoFBSgkkKZAkgAAAAFvck5UAc+id5oAAAFaSURBVEjHzZbHcoNAEERFzhljYZMM/P83ukUDhUxpb4zcB7Q704/SpmFvt/8nTdN0Xf9cdH9WXdeGYZimaVmWJGDbNqxfJ30vIuY4juu6YgDcSLwCmqZBG5jneStzPYAOc2c3AaZgw/wKAwoBw+T6vv8YxvUA95zCymfbtuswrgeCIKgXIdRsOmPIwhOGoQBAK93IdV1HU7dpB8gIA0j3fU93vwntdwG9UsIAdtUwDGoABhY1AQBbHK09gdDRd+zCFkWRAIBCEMfxPgws6hFglwOA7VE1rgfwwUuShMDPouGgPQJDmqZiAOZuHMe7UjTIAFmWAZimaVQKBgB5ngsA+JnnmYxCtOEpBmA5eVbP/54nEwYxoCgKhljRzmvM+sXXwSwAYD+hcJRlidCrrzVSMMC2numLAYqngun9iszrIIGny7EgwKVF42PRMfIWoKoqriga1qI/ESngF89yOEmzGHKGAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIxLTEwLTA1VDA1OjM5OjUxKzAwOjAwksUfagAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMS0xMC0wNVQwNTozOTo1MSswMDowMOOYp9YAAAAASUVORK5CYII="},{name:"lucy",img:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAABICAMAAACHrYYZAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAclBMVEUAAABWWXJ6aGVnUVBGRl51ZGFOT2hjU1lfTlRAQFdCQllcS1ByXmODcnk8PFI6OlBHR19pVVNWWXJGRl7CiEvMllmzez+rZzavcjs6OlD/oKD2rp//y7A7eqJ3STTgcHC/ppDQvpxaZ3VqhJPHjFn///+qkMhRAAAAEnRSTlMAAAAAAAAAAAAAAAAAAAAAAACVcz0/AAAAAWJLR0QlwwHJDwAAAAd0SU1FB+UKBgMZFREdlEYAAAABb3JOVAHPoneaAAABUklEQVRIx+2W2VKDQBBFw74lIIoBwiKg//+NXudq1whK+ULnxfvCdM85KZgJxZxO//lzHMdxXffR5GkTz/N839cUQAdBALSqqmcrV5O6rtfO8UIYhqAxZ9OQKWBAR03AJYoi1Jxb0fwVCnEcfzjHC0mSoECraZrrT+Ez0AGsIKRp2rZt/ZWtJlPAACsIWZbxGbZpTOxnAKwg7NDc8tvtJk3ACoK9psLJ/6/rur7v0ZSV1RTkpskRZTBWFmwUpY2ivIvAgvc9DENvhaWyMI4j1xTdF5POinS42YB1BNzZNE32V3D7dQQATEc4n8+o53medgMAGGAFARfsJZ2dCKYmYC+xaly+VdCUl0RHuFwubCHLsmxPV2hyFmPACgJOA/j65nmO1usvwRQAYJ9njYMFpigKEeRNwEAEAN/OrVrCmwkGDyZ25y5CWZbcUQwKk1VHS3gHKAAJ6thLGQcAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjEtMTAtMDZUMDM6MjU6MTUrMDA6MDCwX2HiAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIxLTEwLTA2VDAzOjI1OjE1KzAwOjAwwQLZXgAAAABJRU5ErkJggg=="}],_a=xa.length-1;_a>0;_a--){var Ca=Math.floor(Math.random()*(_a+1)),Ra=[xa[Ca],xa[_a]];xa[_a]=Ra[0],xa[Ca]=Ra[1]}function Da(){var e=Object(r.useState)(""),t=Object(De.a)(e,2),a=t[0],n=t[1],i=Object(r.useState)(0),o=Object(De.a)(i,2),s=o[0],d=o[1],l=Object(r.useState)(!1),h=Object(De.a)(l,2),u=h[0],m=h[1],y=Object(c.b)(),p=at((function(e){return e.user.videoConnected})),f=at((function(e){return e.room.roomJoined})),b=at((function(e){return e.room.roomName})),v=at((function(e){return e.room.roomDescription})),g=Xe.scene.keys.game;return Object(Rt.jsxs)(fa,{onSubmit:function(e){e.preventDefault(),""===a?m(!0):f&&(console.log("Join! Name:",a,"Avatar:",xa[s].name),g.registerKeys(),g.myPlayer.setPlayerName(a),g.myPlayer.setPlayerTexture(xa[s].name),g.network.readyToConnect(),y(S(!0)))},children:[Object(Rt.jsx)(ba,{children:"Joining"}),Object(Rt.jsxs)(va,{children:[Object(Rt.jsx)(Et.a,{style:{background:w(b)},children:x(b)}),Object(Rt.jsx)("h3",{children:b})]}),Object(Rt.jsxs)(ga,{children:[Object(Rt.jsx)(la.a,{})," ",v]}),Object(Rt.jsxs)(Oa,{children:[Object(Rt.jsxs)(ja,{children:[Object(Rt.jsx)(Aa,{children:"Select an avatar"}),Object(Rt.jsx)(ha.a,{navigation:!0,spaceBetween:0,slidesPerView:1,onSlideChange:function(e){d(e.activeIndex)},children:xa.map((function(e){return Object(Rt.jsx)(ua.a,{children:Object(Rt.jsx)("img",{src:e.img,alt:e.name})},e.name)}))})]}),Object(Rt.jsxs)(ka,{children:[Object(Rt.jsx)(At.a,{autoFocus:!0,fullWidth:!0,label:"Name",variant:"outlined",color:"secondary",error:u,helperText:u&&"Name is required",onInput:function(e){n(e.target.value)}}),p&&Object(Rt.jsx)(wa,{children:Object(Rt.jsx)(st.a,{variant:"outlined",children:"Webcam connected!"})})]})]}),Object(Rt.jsx)(Ea,{children:Object(Rt.jsx)(nt.a,{variant:"contained",color:"secondary",size:"large",type:"submit",children:"Join"})})]})}var Ta=tt.a.div(pa||(pa=Object(et.a)(["\n  position: absolute;\n  height: 100%;\n  width: 100%;\n"])));var Sa=function(){var e,t=at((function(e){return e.user.loggedIn})),a=at((function(e){return e.room.roomJoined}));return e=t?Object(Rt.jsx)(Rt.Fragment,{}):a?Object(Rt.jsx)(Da,{}):Object(Rt.jsx)(qt,{}),Object(Rt.jsx)(Ta,{children:e})},Ia=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,238)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,i=t.getLCP,o=t.getTTFB;a(e),n(e),r(e),i(e),o(e)}))};s.a.render(Object(Rt.jsx)(i.a.StrictMode,{children:Object(Rt.jsx)(c.a,{store:ve,children:Object(Rt.jsx)(d.a,{theme:$e,children:Object(Rt.jsx)(Sa,{})})})}),document.getElementById("root")),Ia()}},[[153,1,2]]]);
//# sourceMappingURL=main.6cfb853a.chunk.js.map